{"version":3,"sources":["ng-rules.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_ngRulesService","_ngRulesService2","angular","factory","RulesService","$timeout","watchItems","_loop","watchName","originName","rStr","rules","isRequired","indexOf","rItems","split","$scope","$watch","value","isUndefined","_ngRuleCollectionService2","required","result","i","len","length","rsp","machRuleStr","rItemMatchResult","timeChecker","cancel","checkValid","$invalid","arguments","Object","defineProperty","_ngRuleCollectionService","$inject","test","number","email","maxLen","rps_value","replace"],"mappings":"SAAS,SAAUA,GAKT,QAASC,GAAoBC,GAG5B,GAAGC,EAAiBD,GACnB,MAAOC,GAAiBD,GAAUE,OAGnC,IAAIC,GAASF,EAAiBD,IAC7BE,WACAE,GAAIJ,EACJK,QAAQ,EAUT,OANAP,GAAQE,GAAUM,KAAKH,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOE,QAAS,EAGTF,EAAOD;;AAvBf,GAAID,KAqCJ,OATAF,GAAoBQ,EAAIT,EAGxBC,EAAoBS,EAAIP,EAGxBF,EAAoBU,EAAI,GAGjBV,EAAoB,KAK/B,SAASI,EAAQD,EAASH,GAE/B,YAEA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,GAAIG,GAAkBf,EAAoB,GAEtCgB,EAAmBL,EAAuBI,EAE9CE,SAAQb,OAAO,eAAgBc,QAAQ,SAAUF,EAAiB,aAI7D,SAASZ,EAAQD,EAASH,GAE/B,YAMA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAMzF,QAASO,GAAaC,GAClB,UAEA,OAAO,YAqBH,QAASC,KACL,GAAIC,GAAQ,SAAUZ,GAClB,GAAIa,GAAYC,EAAaA,EAAa,IAAMd,EAAIA,EAChDe,EAAOC,EAAMhB,GACbiB,EAA0C,KAA7BF,EAAKG,QAAQ,YAC1BC,EAASJ,EAAKK,MAAM,WAExBC,GAAOC,OAAOT,EAAW,SAAUU,GAC/B,IAAIhB,QAAQiB,YAAYD,GAAxB,CAIA,IAAKN,IAAeQ,EAA0B,WAAWC,SAASH,GAE9D,YADAI,EAAO3B,IAAK,EAIhB,KAAK,GAAI4B,GAAI,EAAGC,EAAMV,EAAOW,OAAYD,EAAJD,EAASA,IAAK,CAC/C,GAAIG,GAAMZ,EAAOS,GAAGR,MAAM,WACtBY,EAAcD,EAAI,GAClBE,EAAmBR,EAA0B,WAAWO,GAAaT,EAAOQ,EAAI,GAIpF,IAFAJ,EAAO3B,GAAKiC,GAEPA,EACD,MAIRC,GAAeA,EAAYC,SAC3BD,EAAcxB,EAAS0B,EAAY,QAI3C,KAAK,GAAIpC,KAAKgB,GACVJ,EAAMZ,GAId,QAASoC,KACL,IAAK,GAAIpC,KAAK2B,GACV,GAAU,aAAN3B,IAIC2B,EAAO3B,GAER,YADA2B,EAAOU,UAAW,EAK1BV,GAAOU,UAAW,EAtEtB,GAAIhB,GAAQP,EAAYE,EAAOkB,CAEN,KAArBI,UAAUR,QACVT,EAASiB,UAAU,GACnBtB,EAAQsB,UAAU,KAElBjB,EAASiB,UAAU,GACnBxB,EAAawB,UAAU,GACvBtB,EAAQsB,UAAU,GAGtB,IAAIX,IACAU,UAAU,EAKd,OAFA1B,KAEOgB,GAhCfY,OAAOC,eAAe/C,EAAS,cAC3B8B,OAAO,GAKX,IAAIkB,GAA2BnD,EAAoB,GAE/CmC,EAA4BxB,EAAuBwC,EAiFvDhC,GAAaiC,SAAW,YAExBjD,EAAQ,WAAagB,EACrBf,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,GAEtB,YAEA8C,QAAOC,eAAe/C,EAAS,cAC3B8B,OAAO,IAEX9B,EAAQ,YACJiC,SAAY,SAAkBH,GAC1B,QAAShB,QAAQiB,YAAYD,IAAoB,OAAVA,GAAkB,QAAQoB,KAAKpB,KAE1EqB,OAAU,SAAgBrB,GACtB,MAAQ,oBAAoBoB,KAAKpB,IAGrCsB,MAAS,SAAetB,GACpB,MAAQ,yDAAyDoB,KAAKpB,IAG1EuB,OAAU,SAAgBvB,EAAOM,GAC7B,GAAIkB,GAAYxB,EAAMyB,QAAQ,aAAc,GAC5C,OAAOD,GAAUjB,QAAUD,IAGnCnC,EAAOD,QAAUA,EAAQ","file":"ng-rules.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n\tvar _ngRulesService = __webpack_require__(1);\n\n\tvar _ngRulesService2 = _interopRequireDefault(_ngRulesService);\n\n\tangular.module('ng-rules', []).factory('$rules', _ngRulesService2['default']);\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n\tvar _ngRuleCollectionService = __webpack_require__(2);\n\n\tvar _ngRuleCollectionService2 = _interopRequireDefault(_ngRuleCollectionService);\n\n\tfunction RulesService($timeout) {\n\t    'ngInject';\n\n\t    return function () {\n\n\t        var $scope, originName, rules, timeChecker;\n\n\t        if (arguments.length === 2) {\n\t            $scope = arguments[0];\n\t            rules = arguments[1];\n\t        } else {\n\t            $scope = arguments[0];\n\t            originName = arguments[1];\n\t            rules = arguments[2];\n\t        }\n\n\t        var result = {\n\t            $invalid: false\n\t        };\n\n\t        watchItems();\n\n\t        return result;\n\n\t        function watchItems() {\n\t            var _loop = function (p) {\n\t                var watchName = originName ? originName + '.' + p : p,\n\t                    rStr = rules[p],\n\t                    isRequired = rStr.indexOf('required') !== -1,\n\t                    rItems = rStr.split(/\\s+\\|\\s+/);\n\n\t                $scope.$watch(watchName, function (value) {\n\t                    if (angular.isUndefined(value)) {\n\t                        return;\n\t                    }\n\n\t                    if (!isRequired && !_ngRuleCollectionService2['default'].required(value)) {\n\t                        result[p] = true;\n\t                        return;\n\t                    }\n\n\t                    for (var i = 0, len = rItems.length; i < len; i++) {\n\t                        var rsp = rItems[i].split(/\\s*:\\s*/),\n\t                            machRuleStr = rsp[0],\n\t                            rItemMatchResult = _ngRuleCollectionService2['default'][machRuleStr](value, rsp[1]);\n\n\t                        result[p] = rItemMatchResult;\n\n\t                        if (!rItemMatchResult) {\n\t                            break;\n\t                        }\n\t                    }\n\n\t                    timeChecker && timeChecker.cancel();\n\t                    timeChecker = $timeout(checkValid, 600);\n\t                });\n\t            };\n\n\t            for (var p in rules) {\n\t                _loop(p);\n\t            }\n\t        }\n\n\t        function checkValid() {\n\t            for (var p in result) {\n\t                if (p === '$invalid') {\n\t                    continue;\n\t                }\n\n\t                if (!result[p]) {\n\t                    result.$invalid = true;\n\t                    return;\n\t                }\n\t            }\n\n\t            result.$invalid = false;\n\t        }\n\t    };\n\t}\n\tRulesService.$inject = [\"$timeout\"];\n\n\texports['default'] = RulesService;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports['default'] = {\n\t    'required': function required(value) {\n\t        return !(angular.isUndefined(value) || value === null || /^\\s*$/.test(value));\n\t    },\n\t    'number': function number(value) {\n\t        return (/^-?\\d+(?:\\.\\d+)?$/.test(value)\n\t        );\n\t    },\n\t    'email': function email(value) {\n\t        return (/^(\\w+|\\.+)((-\\w+|\\.+)|(\\.+\\w+))*\\@\\w+((\\.|-)\\w+)*\\.\\w+/.test(value)\n\t        );\n\t    },\n\t    'maxLen': function maxLen(value, len) {\n\t        var rps_value = value.replace(/^\\s+|\\s+$/g, '');\n\t        return rps_value.length <= len;\n\t    }\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ]);"],"sourceRoot":"/source/"}